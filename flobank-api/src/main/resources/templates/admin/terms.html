<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="~{admin/admin_template :: admin_template('μ•½κ΄€ κ΄€λ¦¬','μ•½κ΄€ κ΄€λ¦¬',~{::content},~{::script})}">

<th:block th:fragment="content">


    <!-- ===================================================== -->
    <!-- 1) μ•½κ΄€ λ“±λ΅ -->
    <!-- ===================================================== -->
    <section class="terms-section">
        <h2 class="product-title">μ•½κ΄€ λ“±λ΅</h2>

        <form class="terms-form"
              method="post"
              th:action="@{/admin/terms/register}"
              enctype="multipart/form-data">


            <!-- μΉ΄ν…κ³ λ¦¬ μ„ νƒ -->
            <div class="form-section">
                <h3>μ•½κ΄€ μΉ΄ν…κ³ λ¦¬</h3>
                <div class="form-group">
                    <label>μΉ΄ν…κ³ λ¦¬ μ„ νƒ</label>
                    <select name="cate" class="terms-select" required>
                        <option value="">μ„ νƒν•μ„Έμ”</option>
                        <option value="1">1.νμ›κ°€μ…</option>
                        <option value="2">2.ν™μ „ν•κΈ°</option>
                        <option value="3">3.μ™Έν™”μ†΅κΈ</option>
                        <option value="4">4.μ™Έν™μκΈ</option>
                        <option value="5">5.μ›ν™”ν†µμ¥κ°μ„¤</option>
                        <option value="6">6.μ™Έν™”ν†µμ¥κ°μ„¤</option>
                    </select>
                </div>
            </div>

            <!-- μ λ© -->
            <div class="form-section">
                <h3>μ•½κ΄€ μ λ©</h3>
                <div class="form-group">
                    <input type="text" class="terms-title-input"
                           name="title"
                           placeholder="μ•½κ΄€ μ λ©μ„ μ…λ ¥ν•μ„Έμ”"
                           required />
                </div>
            </div>

            <!-- λ‚΄μ© -->
            <div class="form-section">
                <h3>μ•½κ΄€ λ‚΄μ©</h3>
                <div class="form-group">
                <textarea class="terms-textarea" rows="8"
                          name="content"
                          placeholder="μ•½κ΄€ λ‚΄μ©μ„ μ…λ ¥ν•μ„Έμ”" required></textarea>
                </div>
            </div>

            <!-- νμΌ μ²¨λ¶€ (DB λ²„μ „ κ΄€λ¦¬λΌ νμΌμ€ μ„ νƒ) -->
            <div class="terms-modal-group">
                <h3>μ•½κ΄€ νμΌ μ²¨λ¶€ (μ„ νƒ)</h3>
                <input type="file"
                       name="file"
                       id="modalFile"
                       class="terms-input"
                       accept=".pdf,.doc,.docx">
            </div>

        </form>

        <!-- μ „μ†΅ -->
        <div class="terms-submit-wrap">
            <button type="button" id="termsSubmitBtn" class="btn-submit terms-submit">
                λ“±λ΅ν•κΈ°
            </button>
        </div>



    </section>


    <!-- ===================================================== -->
    <!-- 2) μ•½κ΄€ ν„ν™© -->
    <!-- ===================================================== -->
    <section class="terms-section" id="termsListSection">
        <h2 class="product-title">μ•½κ΄€ ν„ν™©</h2>

        <!-- κ²€μƒ‰ -->
        <form class="terms-search-area" method="get"
              th:action="@{/admin/terms#termsListSection}">
            <select name="type" class="terms-search-type">
                <option value="category" th:selected="${type == 'category'}">μ•½κ΄€ μΉ΄ν…κ³ λ¦¬</option>
                <option value="title" th:selected="${type == 'title'}">μ•½κ΄€ μ λ©</option>
                <option value="content" th:selected="${type == 'content'}">μ•½κ΄€ λ‚΄μ©</option>
            </select>

            <input type="text"
                   name="keyword"
                   class="terms-search-input"
                   placeholder="κ²€μƒ‰μ–΄λ¥Ό μ…λ ¥ν•μ„Έμ”"
                   th:value="${keyword != null and keyword != 'null' ? keyword : ''}">

            <button type="submit" class="terms-search-btn">
                <i class="fa-solid fa-search"></i>
            </button>
        </form>

        <!-- ν…μ΄λΈ” (μ¬λ°”λ¥Έ μ„μΉ) -->
        <div class="product-table-wrap">
            <table class="product-table terms-table">
                <thead>
                <tr>
                    <th>μΉ΄ν…κ³ λ¦¬</th>
                    <th>μλ²</th>
                    <th>μ•½κ΄€ μ λ©</th>
                    <th>λ²„μ „</th>
                    <th>λ“±λ΅μΌ</th>
                    <th>μμ •μΌ</th>
                    <th>κ΄€λ¦¬</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="t : ${termsList}">
                    <td th:text="${t.termCate == 1 ? 'νμ›κ°€μ…' :
                  (t.termCate == 2 ? 'ν™μ „ν•κΈ°' :
                  (t.termCate == 3 ? 'μ™Έν™”μ†΅κΈ' :
                  (t.termCate == 4 ? 'μ™Έν™μκΈ' :
                  (t.termCate == 5 ? 'μ›ν™”ν†µμ¥κ°μ„¤' :
                  (t.termCate == 6 ? 'μ™Έν™”ν†µμ¥κ°μ„¤' : 'κΈ°νƒ€')))))}">
                    </td>

                    <td th:text="${t.termOrder}"></td>
                    <td th:text="${t.termTitle}"></td>
                    <td th:text="'v' + ${t.latestVersion}"></td>
                    <td th:text="${t.termRegDy}"></td>
                    <td th:text="${t.latestRegDy}"></td>

                    <td class="terms-actions">
                        <button type="button" class="terms-edit-btn"
                                th:attr="data-cate=${t.termCate},
                                     data-order=${t.termOrder},
                                     data-title=${t.termTitle}">
                            μμ •
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>



        <!-- νμ΄μ§€λ„¤μ΄μ… -->
        <div class="pagination">

            <!-- μ΄μ „ -->
            <a th:if="${page > 1}"
               th:href="@{|/admin/terms?page=${page-1}&type=${type}&keyword=${keyword}#termsListSection|}"
               class="page-btn prev">γ€</a>

            <!-- μ²« νμ΄μ§€ -->
            <a th:href="@{|/admin/terms?page=1&type=${type}&keyword=${keyword}#termsListSection|}"
               th:classappend="${page == 1} ? 'active'"
               class="page-btn">1</a>

            <!-- ... -->
            <span class="ellipsis" th:if="${page > 4}">...</span>

            <!-- ν„μ¬ νμ΄μ§€ μ£Όλ³€ -->
            <a th:each="p : ${#numbers.sequence(page-2, page+2)}"
               th:if="${p > 1 and p < totalPage}"
               th:href="@{|/admin/terms?page=${p}&type=${type}&keyword=${keyword}#termsListSection|}"
               th:text="${p}"
               th:classappend="${p == page} ? 'active'"
               class="page-btn"></a>

            <!-- ... -->
            <span class="ellipsis" th:if="${page < totalPage-3}">...</span>

            <!-- λ§μ§€λ§‰ νμ΄μ§€ -->
            <a th:if="${totalPage > 1}"
               th:href="@{|/admin/terms?page=${totalPage}&type=${type}&keyword=${keyword}#termsListSection|}"
               th:text="${totalPage}"
               th:classappend="${page == totalPage} ? 'active'"
               class="page-btn"></a>

            <!-- λ‹¤μ -->
            <a th:if="${page < totalPage}"
               th:href="@{|/admin/terms?page=${page+1}&type=${type}&keyword=${keyword}#termsListSection|}"
               class="page-btn next">γ€‰</a>
        </div>
    </section>


    <!-- ==========================
     π”Ή μ•½κ΄€ μμ • λ¨λ‹¬
========================== -->
    <div class="terms-modal" id="termsModal">
        <div class="terms-modal-content">

            <span class="terms-modal-close">&times;</span>

            <h2 class="terms-modal-title">μ•½κ΄€ μμ •</h2>

            <div class="terms-modal-body">

                <!-- μΉ΄ν…κ³ λ¦¬ -->
                <div class="terms-modal-group">
                    <label>μ•½κ΄€ μΉ΄ν…κ³ λ¦¬</label>
                    <input type="text" id="modalCategory" class="terms-input" disabled>
                </div>

                <!-- μ λ© -->
                <div class="terms-modal-group">
                    <label>μ•½κ΄€ μ λ©</label>
                    <input type="text" id="modalTitle" class="terms-input" disabled>
                </div>

                <!-- λ²„μ „ / λ“±λ΅μΌ / λ“±λ΅μ -->
                <div class="terms-modal-row">
                    <div class="terms-modal-group">
                        <label>λ²„μ „</label>
                        <input type="text" id="modalVersion" class="terms-input" disabled>
                    </div>

                    <div class="terms-modal-group">
                        <label>λ“±λ΅μΌ</label>
                        <input type="text" id="modalRegDate" class="terms-input" disabled>
                    </div>

                    <div class="terms-modal-group">
                        <label>λ“±λ΅μ</label>
                        <input type="text" id="modalWriter" class="terms-input" disabled>
                    </div>
                </div>

                <!-- μ λ© -->
                <div class="terms-modal-group">
                    <label>μ½”λ©νΈ(νΉμ΄μ‚¬ν•­)</label>
                    <input type="text" id="modalVerMemo" class="terms-input">
                </div>

                <!-- λ‚΄μ© μμ • -->
                <div class="terms-modal-group">
                    <label>μ•½κ΄€ λ‚΄μ©</label>
                    <textarea id="modalContent" class="terms-textarea" rows="8"></textarea>
                </div>



            </div>
            <div class="terms-modal-footer">
                <button class="terms-modal-cancel">μ·¨μ†</button>
                <button class="terms-modal-save">μ €μ¥ν•κΈ°</button>
            </div>

        </div>



    </div>




    <script th:if="${msg != null}">
        alert([[${msg}]]);   <!-- κ·Έλ€λ΅ μ¨λ„ OK -->
    </script>



</th:block>

<th:block th:fragment="script">
    <script th:src="@{/js/terms.js}"></script>
</th:block>

</html>
