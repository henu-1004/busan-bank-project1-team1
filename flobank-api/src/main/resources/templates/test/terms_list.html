<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
    <meta charset="UTF-8">
    <title>ì•½ê´€ í†µí•© í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f5f6fa;
            padding: 40px;
        }

        h1 {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            background: #fff;
            border-collapse: collapse;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 14px rgba(0,0,0,0.08);
        }

        th {
            background: #4A6FA5;
            color: #fff;
            padding: 14px;
            text-align: center;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            text-align: center;
            background: #fff;
        }

        tr:hover {
            background: #f0f6ff;
        }

        .detail-box {
            margin-top: 30px;
            background: #fff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.08);
            display: none;
        }

        .detail-title {
            font-size: 20px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        pre {
            white-space: pre-wrap;
            background: #fafafa;
            padding: 15px;
            border-radius: 8px;
            line-height: 1.5;
        }

        .btn-detail {
            padding: 5px 12px;
            background: #4A6FA5;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn-detail:hover {
            background: #3c5f8a;
        }
    </style>

</head>

<body>

<h1>ğŸ“„ ë“±ë¡ëœ ì•½ê´€ ì „ì²´ ëª©ë¡ (ìƒì„¸ í¬í•¨)</h1>

<!-- ğŸ”¹ ì•½ê´€ ëª©ë¡ í…Œì´ë¸” -->
<table>
    <thead>
    <tr>
        <th>ì¹´í…Œê³ ë¦¬</th>
        <th>ìˆœë²ˆ</th>
        <th>ì œëª©</th>
        <th>ìµœì‹  ë²„ì „</th>
        <th>ìˆ˜ì •ì¼</th>
        <th>ê´€ë¦¬</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="t : ${termsList}">

        <!-- ì¹´í…Œê³ ë¦¬ -->
        <td>
        <span th:switch="${t.termCate}">
            <span th:case="1">íšŒì›ê°€ì…</span>
            <span th:case="2">ì›í™”ì†¡ê¸ˆ</span>
            <span th:case="3">ì™¸í™”ì†¡ê¸ˆ</span>
            <span th:case="4">ì™¸í™˜ì˜ˆê¸ˆ</span>
            <span th:case="5">ì›í™”í†µì¥ê°œì„¤</span>
            <span th:case="6">ì™¸í™”í†µì¥ê°œì„¤</span>
            <span th:case="*">ê¸°íƒ€</span>
        </span>
        </td>

        <td th:text="${t.termOrder}"></td>
        <td th:text="${t.termTitle}"></td>
        <td th:text="'v' + ${t.latestVersion}"></td>
        <td th:text="${t.latestRegDy}"></td>

        <td>
            <button class="btn-detail"
                    th:onclick="'loadDetail(' + ${t.termCate} + ',' + ${t.termOrder} + ')'">
                ìƒì„¸ë³´ê¸°
            </button>
        </td>
    </tr>
    </tbody>

</table>

<!-- ğŸ”» ìƒì„¸ë³´ê¸° ë°•ìŠ¤ -->
<div id="detailBox" class="detail-box">
    <div class="detail-title" id="detailTitle"></div>
    <div><b>ë²„ì „:</b> <span id="detailVersion"></span></div>
    <div><b>ë“±ë¡ì¼:</b> <span id="detailDate"></span></div>
    <div><b>ë“±ë¡ì:</b> <span id="detailWriter"></span></div>

    <h3 style="margin-top:20px;">ì•½ê´€ ë‚´ìš©</h3>
    <pre id="detailContent"></pre>
</div>

<script>
    /* ğŸ”¥ AJAXë¡œ ìƒì„¸ ë‚´ìš© ë¡œë”© */
    function loadDetail(cate, order) {

        fetch(`/flobank/test/terms/detail/json?cate=` + cate + "&order=" + order)
            .then(res => res.json())
            .then(data => {

                document.getElementById("detailTitle").innerText = data.thistTitle ?? "(ì œëª© ì—†ìŒ)";
                document.getElementById("detailVersion").innerText = data.thistVersion;
                document.getElementById("detailDate").innerText = data.thistRegDy;
                document.getElementById("detailWriter").innerText = data.thistAdminId;
                document.getElementById("detailContent").innerText = data.thistContent;

                document.getElementById("detailBox").style.display = 'block';
            })
            .catch(err => alert("ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."));
    }

</script>

</body>
</html>
