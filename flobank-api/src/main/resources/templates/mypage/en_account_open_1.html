<!--
* 날짜 : 2025/11/20
* 이름 : 김대현
* 내용 : 약관 동의관련 수정
-->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>외화 계좌개설1</title>
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">

    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    crossorigin="anonymous"
    />

</head>
<body data-ctx="/*[[${#httpServletRequest.contextPath}]]*/''">
<div th:replace="~{_template/_header.html}"></div>

<main class="terms-container">
  <h2>외화 입출금 통장 개설 약관 동의</h2>
  <p class="terms-desc">통장 개설을 위해 아래 약관을 확인하시고 동의해주세요.</p>

    <form id="termsForm" th:action="@{/mypage/en_account_open_2}" method="get">


        <section class="terms-group">

            <div class="terms-box" th:each="t, stat : ${termsList}">
                <h3 class="terms-title" th:text="${t.termTitle}">약관 제목</h3>

                <div class="terms-content">
                    <pre th:text="${t.termContent}"></pre>
                </div>

                <div class="terms-check">
                    <label class="custom-check">
                        <input type="checkbox"
                               class="term-check"
                               th:id="|en-term${stat.index}|"
                               required>
                        <span class="checkmark"></span>
                        위 약관에 동의합니다.
                    </label>
                </div>
            </div>

        </section>

        <!-- 전체 동의 (UI용, 실제 기능 필요 X) -->
        <div class="terms-all">
            <label class="custom-check">
                <input type="checkbox" id="agreeAll">
                <span class="checkmark"></span>
                <strong> 모든 약관에 동의합니다.</strong>
            </label>
        </div>

        <!-- 다음 버튼 -->
        <div class="terms-actions">
            <button type="submit" class="btn-next">다음</button>
        </div>

    </form>
</main>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const agreeAll = document.getElementById("agreeAll");
        const checks = document.querySelectorAll(".term-check");
        const form = document.getElementById("termsForm");

        /* ✔ 전체 동의 */
        agreeAll.addEventListener("change", () => {
            checks.forEach(c => (c.checked = agreeAll.checked));
        });

        /* ✔ 개별 체크 변경 시 전체 동의 반응 */
        checks.forEach(chk => {
            chk.addEventListener("change", () => {
                agreeAll.checked = [...checks].every(c => c.checked);
            });
        });

        /* ✔ 제출 시 전체 체크 여부 검사 */
        form.addEventListener("submit", (e) => {
            const allChecked = [...checks].every(c => c.checked);

            if (!allChecked) {
                e.preventDefault();
                alert("모든 약관에 동의해야 다음 단계로 진행할 수 있습니다.");
            }
        });
    });
</script>

<div th:replace="~{_template/_footer.html}"></div>

</body>
</html>

